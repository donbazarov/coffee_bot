# –ó–∞–º–µ—Ç–∫–∏ –æ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ –ø—Ä–æ–µ–∫—Ç–∞ –∫ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—é

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –≤ –ë–î
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ `users` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–ª—è–º–∏:
  - `id` - –ø–µ—Ä–≤–∏—á–Ω—ã–π –∫–ª—é—á
  - `name` - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `telegram_id` - ID –≤ Telegram
  - `telegram_username` - username –≤ Telegram
  - `role` - —Ä–æ–ª—å (barista, senior, mentor)
  - `is_active` - —Ñ–ª–∞–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
  - `created_at`, `updated_at` - –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏

- ‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `bot/database/user_operations.py` —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏:
  - `get_user_by_telegram_id()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID
  - `get_user_by_username()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ username
  - `create_user()` - —Å–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `update_user()` - –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `delete_user()` - —É–¥–∞–ª–µ–Ω–∏–µ (–¥–µ–∞–∫—Ç–∏–≤–∞—Ü–∏—è) –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `get_all_users()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - `get_users_by_role()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –ø–æ —Ä–æ–ª–∏
  - `has_role()`, `has_any_role()` - –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π

### 2. –°–∏—Å—Ç–µ–º–∞ —Ä–æ–ª–µ–π
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —Ç—Ä–∏ —Ä–æ–ª–∏:
  - `barista` - –±–∞—Ä–∏—Å—Ç–∞
  - `senior` - —Å—Ç–∞—Ä—à–∏–π
  - `mentor` - –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫

- ‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `bot/utils/auth.py` —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∞–≤:
  - `get_user_role()` - –ø–æ–ª—É—á–µ–Ω–∏–µ —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - `is_mentor()` - –ø—Ä–æ–≤–µ—Ä–∫–∞, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–º
  - `is_senior_or_mentor()` - –ø—Ä–æ–≤–µ—Ä–∫–∞, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å—Ç–∞—Ä—à–∏–º –∏–ª–∏ –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–º
  - `require_roles()` - –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ä–æ–ª–µ–π

### 3. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–≥–æ–≤
- ‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥ —Å –∑–∞—Å—Ç–æ–ø–æ—Ä–∏–≤–∞–Ω–∏–µ–º –¥–∏–∞–ª–æ–≥–∞:**
  - –î–æ–±–∞–≤–ª–µ–Ω `/start` –≤ fallbacks ConversationHandler
  - –ü—Ä–∏ `/start` –æ—á–∏—â–∞—é—Ç—Å—è –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  - –î–∏–∞–ª–æ–≥ –º–æ–∂–Ω–æ –ø—Ä–µ—Ä–≤–∞—Ç—å –∫–æ–º–∞–Ω–¥–æ–π `/start`

- ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "‚ùå –û—Ç–º–µ–Ω–∞" –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö:**
  - –ö–Ω–æ–ø–∫–∞ –æ—Ç–º–µ–Ω—ã –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤–æ –≤—Å–µ –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã
  - –û—Ç–º–µ–Ω–∞ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –≤ –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
  - –ö–Ω–æ–ø–∫–∞ –æ—Ç–º–µ–Ω—ã —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —ç—Ç–∞–ø–∞—Ö –æ—Ü–µ–Ω–∫–∏

### 4. –ú–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫
- ‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `bot/handlers/settings.py` —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏:
  - –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
  - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
  - –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞)
  - –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞)

- ‚úÖ –î–æ—Å—Ç—É–ø –∫ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º: —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ä—à–∏–µ –∏ –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∏

### 5. –ß–µ–∫-–ª–∏—Å—Ç —Å–º–µ–Ω—ã
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–Ω–æ–ø–∫–∞ "üìù –ß–µ–∫-–ª–∏—Å—Ç —Å–º–µ–Ω—ã" –Ω–∞ –≥–ª–∞–≤–Ω—É—é
- ‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `bot/handlers/checklist.py` (–∑–∞–≥–ª—É—à–∫–∞)
- ‚úÖ –ì–æ—Ç–æ–≤ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### 6. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
- ‚úÖ **–û—Ü–µ–Ω–∏—Ç—å –Ω–∞–ø–∏—Ç–æ–∫** - —Ç–æ–ª—å–∫–æ –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∏
- ‚úÖ **–ö–æ–Ω—Ç—Ä–æ–ª—å —á–∏—Å—Ç–æ—Ç—ã** - —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ä—à–∏–µ –∏ –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∏
- ‚úÖ **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** - —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ä—à–∏–µ –∏ –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∏
- ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** - –¥–æ—Å—Ç—É–ø–Ω–∞ –≤—Å–µ–º

### 7. –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å `bot/database/migrations.py`
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∏–≥—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏–∑ `config.py` –≤ –ë–î –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
- ‚úÖ –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
bot/
‚îú‚îÄ‚îÄ config.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –æ—Å—Ç–∞—é—Ç—Å—è –¥–ª—è fallback)
‚îú‚îÄ‚îÄ main.py                # –ì–ª–∞–≤–Ω—ã–π —Ñ–∞–π–ª –±–æ—Ç–∞ (–æ–±–Ω–æ–≤–ª–µ–Ω)
‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ models.py          # –ú–æ–¥–µ–ª–∏ –ë–î (–¥–æ–±–∞–≤–ª–µ–Ω–∞ –º–æ–¥–µ–ª—å User)
‚îÇ   ‚îú‚îÄ‚îÄ simple_db.py       # –ü—Ä–æ—Å—Ç—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å –ë–î (–æ–±–Ω–æ–≤–ª–µ–Ω)
‚îÇ   ‚îú‚îÄ‚îÄ user_operations.py # –û–ø–µ—Ä–∞—Ü–∏–∏ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–Ω–æ–≤—ã–π)
‚îÇ   ‚îî‚îÄ‚îÄ migrations.py      # –ú–∏–≥—Ä–∞—Ü–∏–∏ (–Ω–æ–≤—ã–π)
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ review.py          # –û—Ü–µ–Ω–∫–∞ –Ω–∞–ø–∏—Ç–∫–æ–≤ (–æ–±–Ω–æ–≤–ª–µ–Ω)
‚îÇ   ‚îú‚îÄ‚îÄ stats.py           # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ settings.py        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–Ω–æ–≤—ã–π)
‚îÇ   ‚îî‚îÄ‚îÄ checklist.py       # –ß–µ–∫-–ª–∏—Å—Ç —Å–º–µ–Ω—ã (–Ω–æ–≤—ã–π)
‚îú‚îÄ‚îÄ keyboards/
‚îÇ   ‚îî‚îÄ‚îÄ menus.py           # –ú–µ–Ω—é (–æ–±–Ω–æ–≤–ª–µ–Ω–æ)
‚îî‚îÄ‚îÄ utils/
    ‚îî‚îÄ‚îÄ auth.py            # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ (–Ω–æ–≤—ã–π)
```

## –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫
–ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
1. –°–æ–∑–¥–∞—é—Ç—Å—è —Ç–∞–±–ª–∏—Ü—ã –≤ –ë–î
2. –ú–∏–≥—Ä–∏—Ä—É—é—Ç—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–∑ `config.py` –≤ –ë–î

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞
1. –ù–∞–∂–∞—Ç—å "‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏"
2. –í—ã–±—Ä–∞—Ç—å "üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏"
3. –í—ã–±—Ä–∞—Ç—å "‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
4. –°–ª–µ–¥–æ–≤–∞—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–æ–ª–µ–π –≤ –∫–æ–¥–µ
```python
from bot.utils.auth import is_mentor, is_senior_or_mentor, require_roles

# –ü—Ä–æ—Å—Ç–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
if is_mentor(update):
    # –∫–æ–¥ –¥–ª—è –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–æ–≤

# –î–µ–∫–æ—Ä–∞—Ç–æ—Ä
@require_roles(['mentor', 'senior'])
async def some_function(update, context):
    # –∫–æ–¥ –¥–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –Ω–∞—Å—Ç–∞–≤–Ω–∏–∫–∞–º –∏ —Å—Ç–∞—Ä—à–∏–º
```

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–¥–ª—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏)

1. **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - –¥–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
2. **–£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** - —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —É–¥–∞–ª–µ–Ω–∏–µ —Å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ–º
3. **–ß–µ–∫-–ª–∏—Å—Ç —Å–º–µ–Ω—ã** - —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø–æ–ª–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
4. **–ö–æ–Ω—Ç—Ä–æ–ª—å —á–∏—Å—Ç–æ—Ç—ã** - —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å –∫–æ–Ω—Ç—Ä–æ–ª—è

## –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∏–∑ `config.py` –æ—Å—Ç–∞—é—Ç—Å—è –∫–∞–∫ fallback, –µ—Å–ª–∏ –ë–î –ø—É—Å—Ç–∞
- –ü—Ä–∏ –º–∏–≥—Ä–∞—Ü–∏–∏ `respondents` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å—Ç–∞–Ω–æ–≤—è—Ç—Å—è `mentors`
- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç–∞—Ç—å
- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞

